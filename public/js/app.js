(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var longpresser_1 = require('./longpresser');
var wasPressed = false;
var numExtras = 0;
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = {
    view: function (vnode) {
        return m('div', [
            m('div', { class: 'pressme' }, m(longpresser_1.default, {
                text: "Press Me",
                textColor: '#FFF',
                fgStrokeColor: '#F00',
                bgStrokeColor: '#A00',
                bgFillColor: '#800',
                duration: 0.75,
                onpressed: function () { wasPressed = true; }
            })),
            m('span', { style: { marginLeft: '2em' } }, wasPressed ? 'Pressed!' : ''),
            m('p', m('button', { onclick: function () { ++numExtras; } }, "Create another")),
            // Add any extra longpressers that were created by user
            m('p', (function () {
                var extras = [];
                for (var i = 0; i < numExtras; ++i) {
                    extras.push(m('div', { class: 'pressme', style: { width: '100px', height: '100px' } }, m(longpresser_1.default, {
                        text: "Press me " + (i + 1),
                        textColor: '#333',
                        fgStrokeColor: '#666',
                        bgStrokeColor: '#888',
                        bgFillColor: '#EEE',
                        duration: 0.75
                    })));
                }
                return extras;
            }()))
        ]);
    }
};
},{"./longpresser":2}],2:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var DEFAULT_DURATION = 1 * 1000;
var RADIUS = 50;
var STROKE_WIDTH = 8;
var F_STROKE_WIDTH = 1;
// in the absense of Pointer events support...
var DEVICE_NONE = 0;
var DEVICE_MOUSE = 1;
var DEVICE_TOUCH = 2;
var device = DEVICE_NONE;
//
// LongPresser component
//
var LongPresser = (function (_super) {
    __extends(LongPresser, _super);
    function LongPresser(_a) {
        var attrs = _a.attrs;
        _super.call(this);
        // Set up state vars
        this.duration = (+attrs.duration > 0) ? (+attrs.duration) * 1000 : DEFAULT_DURATION;
        this.fgStrokeColor = attrs.fgStrokeColor;
        this.bgStrokeColor = attrs.bgStrokeColor;
        this.isPressed = false;
        this.pressT = 0;
        this.isFinished = false;
        this.prevT = Date.now();
    }
    LongPresser.prototype.oncreate = function (_a) {
        var _this = this;
        var dom = _a.dom;
        // Grab some elements we'll use a lot
        this.el = dom;
        this.elSvg = this.el.childNodes[0];
        this.elBgCircle = this.elSvg.childNodes[0];
        this.elArc = this.elSvg.childNodes[1];
        this.elText = this.elSvg.childNodes[2];
        this.elFgCircle = this.elSvg.childNodes[3];
        this.elFgText = this.elSvg.childNodes[4];
        // Add our own event listeners hidden from Mithril
        this.el.addEventListener('mousedown', function () {
            if (device !== DEVICE_TOUCH) {
                device = DEVICE_MOUSE;
                if (!_this.isPressed) {
                    _this.startPress();
                }
            }
        });
        this.el.addEventListener('mouseup', function () {
            if (device !== DEVICE_TOUCH) {
                device = DEVICE_MOUSE;
                if (_this.isPressed) {
                    _this.endPress();
                }
            }
        });
        this.el.addEventListener('touchstart', function () {
            if (device !== DEVICE_MOUSE) {
                device = DEVICE_TOUCH;
                if (!_this.isPressed) {
                    _this.startPress();
                }
            }
        });
        this.el.addEventListener('touchend', function () {
            if (device !== DEVICE_MOUSE) {
                device = DEVICE_TOUCH;
                if (_this.isPressed) {
                    _this.endPress();
                }
            }
        });
    };
    LongPresser.prototype.view = function (_a) {
        var attrs = _a.attrs;
        console.log('LongPresser view called');
        return m('div', { class: 'longpresser', style: { cursor: this.isFinished ? 'default' : 'pointer' }, onpressed: attrs.onpressed }, m('svg', { viewBox: "0 0 " + RADIUS * 2 + " " + RADIUS * 2, version: '1.1', xmlns: 'http://www.w3.org/2000/svg' }, m('circle', { cx: RADIUS, cy: RADIUS, r: RADIUS - STROKE_WIDTH / 2, style: { fill: attrs.bgFillColor, stroke: this.isFinished ? attrs.fgStrokeColor : attrs.bgStrokeColor, strokeWidth: STROKE_WIDTH } }), m('path', { d: svgArcPath(RADIUS, RADIUS, RADIUS - STROKE_WIDTH / 2, 0, 360.0 * accel(this.pressT / this.duration)), style: { fill: 'transparent', stroke: attrs.fgStrokeColor, strokeWidth: STROKE_WIDTH } }), m('text', { x: RADIUS, y: RADIUS, style: { textAnchor: 'middle', dominantBaseline: 'middle', fontSize: '0.95em', fill: attrs.textColor } }, attrs.text), m('circle', { cx: RADIUS, cy: RADIUS, r: RADIUS - F_STROKE_WIDTH / 2, style: { fill: '#EEE', stroke: '#CCC', strokeWidth: F_STROKE_WIDTH, opacity: this.isFinished ? 1 : 0 } }), m('text', { x: RADIUS, y: RADIUS, style: { textAnchor: 'middle', dominantBaseline: 'middle', fontSize: '1.5em', fill: '#000', opacity: this.isFinished ? 1 : 0 } }, m.trust('&#10004'))));
    };
    // Internally used methods
    LongPresser.prototype.startPress = function () {
        var _this = this;
        this.isPressed = true;
        this.prevT = Date.now();
        requestAnimationFrame(function () { _this.updatePress(); });
    };
    LongPresser.prototype.endPress = function () {
        this.isPressed = false;
    };
    LongPresser.prototype.updatePress = function () {
        var _this = this;
        if (!this.isPressed) {
            this.updateRelease();
            return;
        }
        var t = Date.now();
        var dt = t - this.prevT;
        this.pressT = Math.min(this.pressT + dt, this.duration);
        drawArc(this.elArc, accel(this.pressT / this.duration));
        this.prevT = t;
        if (this.pressT >= this.duration) {
            this.finish();
            return; // cancel the animation loop by exiting here
        }
        // Keep animation running
        requestAnimationFrame(function () { _this.updatePress(); });
    };
    LongPresser.prototype.updateRelease = function () {
        var _this = this;
        var t = Date.now();
        var dt = t - this.prevT;
        this.pressT = Math.max(this.pressT - dt, 0);
        drawArc(this.elArc, accel(this.pressT / this.duration));
        this.prevT = t;
        if (this.pressT <= 0) {
            return; // cancel the animation loop by exiting here
        }
        // Keep animation running
        // Use updatPress in case isPressed state changes
        requestAnimationFrame(function () { _this.updatePress(); });
    };
    LongPresser.prototype.finish = function () {
        drawArc(this.elArc, 0);
        this.el.style.cursor = 'default';
        this.elBgCircle.style.stroke = this.fgStrokeColor;
        this.pressT = 0;
        this.isPressed = false;
        this.isFinished = true;
        fadeIn(this.elFgCircle);
        fadeIn(this.elFgText);
        this.el.dispatchEvent(new Event('pressed'));
    };
    LongPresser.prototype.reset = function () {
        this.isPressed = false;
        this.pressT = 0;
        this.elBgCircle.style.stroke = this.bgStrokeColor;
        this.el.style.cursor = 'pointer';
        drawArc(this.elArc, 0);
        this.isFinished = false;
        // Hide the 'finished' elements
        removeFadeIn(this.elFgCircle);
        removeFadeIn(this.elFgText);
    };
    return LongPresser;
}(m.Component));
// SVG Arc helper functions (because arcs are otherwise difficult with SVG!)
function polarToCartesian(centerX, centerY, radius, degrees, out) {
    var r = (degrees - 90) * Math.PI / 180.0;
    out.x = centerX + (radius * Math.cos(r));
    out.y = centerY + (radius * Math.sin(r));
    return out;
}
// Create an SVG arc definition centred at x,y with radius,
// start and end angles (clockwise, in degrees)
var svgArcPath = (function () {
    var _p0 = { x: 0, y: 0 };
    var _p1 = { x: 0, y: 0 };
    function svgArcPath(x, y, radius, startAngle, endAngle) {
        polarToCartesian(x, y, radius, endAngle, _p0);
        polarToCartesian(x, y, radius, startAngle, _p1);
        var arcSweep = endAngle - startAngle <= 180 ? '0' : '1';
        return 'M ' + _p0.x + ' ' + _p0.y +
            'A ' + radius + ' ' + radius + ' 0 ' + arcSweep + ' 0 ' + _p1.x + ' ' + _p1.y;
    }
    return svgArcPath;
}());
/**
 * Draw % of arc
 * @param {HTMLElement} el
 * @param {number} pct
 */
function drawArc(el, pct) {
    el.setAttribute('d', svgArcPath(RADIUS, RADIUS, RADIUS - STROKE_WIDTH / 2, 0, pct * 360));
}
/** Non-linear arc motion */
function accel(t) {
    return Math.pow(t, 2.25);
}
function fadeIn(el) {
    el.style.opacity = '1';
    el.classList.add('longpresser-fade-in');
}
function removeFadeIn(el) {
    el.style.opacity = '0';
    el.classList.remove('longpresser-fade-in');
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = LongPresser;
},{}],3:[function(require,module,exports){
"use strict";
var app_1 = require('./app');
window.addEventListener('load', function () {
    m.mount(document.getElementById('app'), app_1.default);
});
},{"./app":1}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLnRzIiwic3JjL2xvbmdwcmVzc2VyLnRzIiwic3JjL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDRUEsNEJBQXdCLGVBRXhCLENBQUMsQ0FGc0M7QUFFdkMsSUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFBO0FBQ3RCLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQTtBQUVqQjtrQkFBZTtJQUNkLElBQUksWUFBRSxLQUFvQjtRQUN6QixNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtZQUNmLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFDLEVBQzFCLENBQUMsQ0FBQyxxQkFBVyxFQUFFO2dCQUNkLElBQUksRUFBRSxVQUFVO2dCQUNoQixTQUFTLEVBQUUsTUFBTTtnQkFDakIsYUFBYSxFQUFFLE1BQU07Z0JBQ3JCLGFBQWEsRUFBRSxNQUFNO2dCQUNyQixXQUFXLEVBQUUsTUFBTTtnQkFDbkIsUUFBUSxFQUFFLElBQUk7Z0JBQ2QsU0FBUyxFQUFFLGNBQU8sVUFBVSxHQUFHLElBQUksQ0FBQSxDQUFBLENBQUM7YUFDcEMsQ0FBQyxDQUNGO1lBQ0QsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFDLEtBQUssRUFBRSxFQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUMsRUFBQyxFQUFFLFVBQVUsR0FBRyxVQUFVLEdBQUcsRUFBRSxDQUFDO1lBQ3JFLENBQUMsQ0FBQyxHQUFHLEVBQ0osQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFDLE9BQU8sRUFBRSxjQUFPLEVBQUUsU0FBUyxDQUFBLENBQUEsQ0FBQyxFQUFDLEVBQUUsZ0JBQWdCLENBQUMsQ0FDN0Q7WUFDRCx1REFBdUQ7WUFDdkQsQ0FBQyxDQUFDLEdBQUcsRUFDSixDQUFDO2dCQUNBLElBQU0sTUFBTSxHQUFvQixFQUFFLENBQUE7Z0JBQ2xDLEdBQUcsQ0FBQyxDQUFDLElB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QUcsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLGFBQWEsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFDLEVBQUMsQ0FBQyxFQUN0TSxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFDLFVBQVUsRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQUMsRUFBQyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFDbkosQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsTUFBTSxHQUFDLGNBQWMsR0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBQyxFQUFDLENBQUMsRUFDdkssQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBQyxFQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUNuTCxDQUNELENBQUE7SUFDRixDQUFD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QUMsR0FBRyxFQUNsQixVQUFVLENBQ1QsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsWUFBWSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FDdkQsQ0FDRCxDQUFBO0FBQ0YsQ0FBQztBQUVELDRCQUE0QjtBQUM1QixlQUFnQixDQUFTO0lBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUN6QixDQUFDO0FBRUQsZ0JBQWlCLEVBQU87SUFDdkIsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFBO0lBQ3RCLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUE7QUFDeEMsQ0FBQztBQUVELHNCQUF1QixFQUFPO0lBQzdCLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQTtJQUN0QixFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0FBQzNDLENBQUM7QUFHRDtrQkFBb0IsV0FBdUMsQ0FBQTs7O0FDck8zRCxvQkFBZ0IsT0FFaEIsQ0FBQyxDQUZzQjtBQUV2QixNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFO0lBQy9CLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQWdCLEVBQUUsYUFBRyxDQUFDLENBQUE7QUFDNUQsQ0FBQyxDQUFDLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZGVjbGFyZSBjb25zdCBtOiBNaXRocmlsLlN0YXRpY1xuXG5pbXBvcnQgTG9uZ1ByZXNzZXIgZnJvbSAnLi9sb25ncHJlc3NlcidcblxubGV0IHdhc1ByZXNzZWQgPSBmYWxzZVxubGV0IG51bUV4dHJhcyA9IDBcblxuZXhwb3J0IGRlZmF1bHQge1xuXHR2aWV3ICh2bm9kZTogTWl0aHJpbC5Wbm9kZSkge1xuXHRcdHJldHVybiBtKCdkaXYnLCBbXG5cdFx0XHRtKCdkaXYnLCB7Y2xhc3M6ICdwcmVzc21lJ30sXG5cdFx0XHRcdG0oTG9uZ1ByZXNzZXIsIHtcblx0XHRcdFx0XHR0ZXh0OiBcIlByZXNzIE1lXCIsXG5cdFx0XHRcdFx0dGV4dENvbG9yOiAnI0ZGRicsXG5cdFx0XHRcdFx0ZmdTdHJva2VDb2xvcjogJyNGMDAnLFxuXHRcdFx0XHRcdGJnU3Ryb2tlQ29sb3I6ICcjQTAwJyxcblx0XHRcdFx0XHRiZ0ZpbGxDb2xvcjogJyM4MDAnLFxuXHRcdFx0XHRcdGR1cmF0aW9uOiAwLjc1LFxuXHRcdFx0XHRcdG9ucHJlc3NlZDogKCkgPT4ge3dhc1ByZXNzZWQgPSB0cnVlfVxuXHRcdFx0XHR9KVxuXHRcdFx0KSxcblx0XHRcdG0oJ3NwYW4nLCB7c3R5bGU6IHttYXJnaW5MZWZ0OiAnMmVtJ319LCB3YXNQcmVzc2VkID8gJ1ByZXNzZWQhJyA6ICcnKSxcblx0XHRcdG0oJ3AnLFxuXHRcdFx0XHRtKCdidXR0b24nLCB7b25jbGljazogKCkgPT4geysrbnVtRXh0cmFzfX0sIFwiQ3JlYXRlIGFub3RoZXJcIilcblx0XHRcdCksXG5cdFx0XHQvLyBBZGQgYW55IGV4dHJhIGxvbmdwcmVzc2VycyB0aGF0IHdlcmUgY3JlYXRlZCBieSB1c2VyXG5cdFx0XHRtKCdwJyxcblx0XHRcdFx0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0Y29uc3QgZXh0cmFzOiBNaXRocmlsLlZub2RlW10gPSBbXVxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbnVtRXh0cmFzOyArK2kpIHtcblx0XHRcdFx0XHRcdGV4dHJhcy5wdXNoKFxuXHRcdFx0XHRcdFx0XHRtKCdkaXYnLCB7Y2xhc3M6ICdwcmVzc21lJywgc3R5bGU6IHt3aWR0aDogJzEwMHB4JywgaGVpZ2h0OiAnMTAwcHgnfX0sXG5cdFx0XHRcdFx0XHRcdFx0bShMb25nUHJlc3Nlciwge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogXCJQcmVzcyBtZSBcIisoaSsxKSxcblx0XHRcdFx0XHRcdFx0XHRcdHRleHRDb2xvcjogJyMzMzMnLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZmdTdHJva2VDb2xvcjogJyM2NjYnLFxuXHRcdFx0XHRcdFx0XHRcdFx0YmdTdHJva2VDb2xvcjogJyM4ODgnLFxuXHRcdFx0XHRcdFx0XHRcdFx0YmdGaWxsQ29sb3I6ICcjRUVFJyxcblx0XHRcdFx0XHRcdFx0XHRcdGR1cmF0aW9uOiAwLjc1XG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZXh0cmFzXG5cdFx0XHRcdH0oKSlcblx0XHRcdClcblx0XHRdKVxuXHR9XG59XG4iLCJkZWNsYXJlIGNvbnN0IG06IE1pdGhyaWwuU3RhdGljXG5cbmNvbnN0IERFRkFVTFRfRFVSQVRJT04gPSAxICogMTAwMFxuY29uc3QgUkFESVVTID0gNTBcbmNvbnN0IFNUUk9LRV9XSURUSCA9IDhcbmNvbnN0IEZfU1RST0tFX1dJRFRIID0gMVxuXG4vLyBpbiB0aGUgYWJzZW5zZSBvZiBQb2ludGVyIGV2ZW50cyBzdXBwb3J0Li4uXG5jb25zdCBERVZJQ0VfTk9ORSA9IDBcbmNvbnN0IERFVklDRV9NT1VTRSA9IDFcbmNvbnN0IERFVklDRV9UT1VDSCA9IDJcblxubGV0IGRldmljZSA9IERFVklDRV9OT05FXG5cbmludGVyZmFjZSBWZWMyIHtcblx0eDogbnVtYmVyXG5cdHk6IG51bWJlclxufVxuXG4vL1xuLy8gTG9uZ1ByZXNzZXIgY29tcG9uZW50XG4vL1xuY2xhc3MgTG9uZ1ByZXNzZXIgZXh0ZW5kcyBtLkNvbXBvbmVudCB7XG5cdGVsOiBIVE1MRWxlbWVudFxuXHRlbFN2ZzogU1ZHU1ZHRWxlbWVudFxuXHRlbEJnQ2lyY2xlOiBTVkdDaXJjbGVFbGVtZW50XG5cdGVsRmdDaXJjbGU6IFNWR0NpcmNsZUVsZW1lbnRcblx0ZWxBcmM6IFNWR1NWR0VsZW1lbnRcblx0ZWxUZXh0OiBTVkdUZXh0RWxlbWVudFxuXHRlbEZnVGV4dDogU1ZHVGV4dEVsZW1lbnRcblx0ZHVyYXRpb246IG51bWJlclxuXHRmZ1N0cm9rZUNvbG9yOiBzdHJpbmdcblx0YmdTdHJva2VDb2xvcjogc3RyaW5nXG5cdGlzUHJlc3NlZDogYm9vbGVhblxuXHRpc0ZpbmlzaGVkOiBib29sZWFuXG5cdHByZXNzVDogbnVtYmVyXG5cdHByZXZUOiBudW1iZXJcblxuXHRjb25zdHJ1Y3RvciAoe2F0dHJzfTogTWl0aHJpbC5Wbm9kZSkge1xuXHRcdHN1cGVyKClcblx0XHQvLyBTZXQgdXAgc3RhdGUgdmFyc1xuXHRcdHRoaXMuZHVyYXRpb24gPSAoK2F0dHJzLmR1cmF0aW9uID4gMCkgPyAoK2F0dHJzLmR1cmF0aW9uKSAqIDEwMDAgOiBERUZBVUxUX0RVUkFUSU9OXG5cdFx0dGhpcy5mZ1N0cm9rZUNvbG9yID0gYXR0cnMuZmdTdHJva2VDb2xvclxuXHRcdHRoaXMuYmdTdHJva2VDb2xvciA9IGF0dHJzLmJnU3Ryb2tlQ29sb3Jcblx0XHR0aGlzLmlzUHJlc3NlZCA9IGZhbHNlXG5cdFx0dGhpcy5wcmVzc1QgPSAwXG5cdFx0dGhpcy5pc0ZpbmlzaGVkID0gZmFsc2Vcblx0XHR0aGlzLnByZXZUID0gRGF0ZS5ub3coKVxuXHR9XG5cblx0b25jcmVhdGUgKHtkb219OiBNaXRocmlsLlZub2RlKSB7XG5cdFx0Ly8gR3JhYiBzb21lIGVsZW1lbnRzIHdlJ2xsIHVzZSBhIGxvdFxuXHRcdHRoaXMuZWwgPSBkb20gYXMgSFRNTEVsZW1lbnRcblx0XHR0aGlzLmVsU3ZnID0gdGhpcy5lbC5jaGlsZE5vZGVzWzBdIGFzIFNWR1NWR0VsZW1lbnRcblx0XHR0aGlzLmVsQmdDaXJjbGUgPSB0aGlzLmVsU3ZnLmNoaWxkTm9kZXNbMF0gYXMgU1ZHQ2lyY2xlRWxlbWVudFxuXHRcdHRoaXMuZWxBcmMgPSB0aGlzLmVsU3ZnLmNoaWxkTm9kZXNbMV0gYXMgU1ZHU1ZHRWxlbWVudFxuXHRcdHRoaXMuZWxUZXh0ID0gdGhpcy5lbFN2Zy5jaGlsZE5vZGVzWzJdIGFzIFNWR1RleHRFbGVtZW50XG5cdFx0dGhpcy5lbEZnQ2lyY2xlID0gdGhpcy5lbFN2Zy5jaGlsZE5vZGVzWzNdIGFzIFNWR0NpcmNsZUVsZW1lbnRcblx0XHR0aGlzLmVsRmdUZXh0ID0gdGhpcy5lbFN2Zy5jaGlsZE5vZGVzWzRdIGFzIFNWR1RleHRFbGVtZW50XG5cblx0XHQvLyBBZGQgb3VyIG93biBldmVudCBsaXN0ZW5lcnMgaGlkZGVuIGZyb20gTWl0aHJpbFxuXHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xuXHRcdFx0aWYgKGRldmljZSAhPT0gREVWSUNFX1RPVUNIKSB7XG5cdFx0XHRcdGRldmljZSA9IERFVklDRV9NT1VTRVxuXHRcdFx0XHRpZiAoIXRoaXMuaXNQcmVzc2VkKSB7XG5cdFx0XHRcdFx0dGhpcy5zdGFydFByZXNzKClcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4ge1xuXHRcdFx0aWYgKGRldmljZSAhPT0gREVWSUNFX1RPVUNIKSB7XG5cdFx0XHRcdGRldmljZSA9IERFVklDRV9NT1VTRVxuXHRcdFx0XHRpZiAodGhpcy5pc1ByZXNzZWQpIHtcblx0XHRcdFx0XHR0aGlzLmVuZFByZXNzKClcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKCkgPT4ge1xuXHRcdFx0aWYgKGRldmljZSAhPT0gREVWSUNFX01PVVNFKSB7XG5cdFx0XHRcdGRldmljZSA9IERFVklDRV9UT1VDSFxuXHRcdFx0XHRpZiAoIXRoaXMuaXNQcmVzc2VkKSB7XG5cdFx0XHRcdFx0dGhpcy5zdGFydFByZXNzKClcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcblx0XHRcdGlmIChkZXZpY2UgIT09IERFVklDRV9NT1VTRSkge1xuXHRcdFx0XHRkZXZpY2UgPSBERVZJQ0VfVE9VQ0hcblx0XHRcdFx0aWYgKHRoaXMuaXNQcmVzc2VkKSB7XG5cdFx0XHRcdFx0dGhpcy5lbmRQcmVzcygpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0dmlldyAoe2F0dHJzfTogTWl0aHJpbC5Wbm9kZSkge1xuXHRcdGNvbnNvbGUubG9nKCdMb25nUHJlc3NlciB2aWV3IGNhbGxlZCcpXG5cdFx0cmV0dXJuIG0oJ2RpdicsIHtjbGFzczogJ2xvbmdwcmVzc2VyJywgc3R5bGU6IHtjdXJzb3I6IHRoaXMuaXNGaW5pc2hlZCA/ICdkZWZhdWx0JyA6ICdwb2ludGVyJ30sIG9ucHJlc3NlZDogYXR0cnMub25wcmVzc2VkfSxcblx0XHRcdG0oJ3N2ZycsIHt2aWV3Qm94OiBgMCAwICR7UkFESVVTKjJ9ICR7UkFESVVTKjJ9YCwgdmVyc2lvbjogJzEuMScsIHhtbG5zOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnfSxcblx0XHRcdFx0bSgnY2lyY2xlJywge2N4OiBSQURJVVMsIGN5OiBSQURJVVMsIHI6IFJBRElVUy1TVFJPS0VfV0lEVEgvMiwgc3R5bGU6IHtmaWxsOiBhdHRycy5iZ0ZpbGxDb2xvciwgc3Ryb2tlOiB0aGlzLmlzRmluaXNoZWQgPyBhdHRycy5mZ1N0cm9rZUNvbG9yIDogYXR0cnMuYmdTdHJva2VDb2xvciwgc3Ryb2tlV2lkdGg6IFNUUk9LRV9XSURUSH19KSxcblx0XHRcdFx0bSgncGF0aCcsIHtkOiBzdmdBcmNQYXRoKFJBRElVUywgUkFESVVTLCBSQURJVVMtU1RST0tFX1dJRFRILzIsIDAsIDM2MC4wICogYWNjZWwodGhpcy5wcmVzc1QgLyB0aGlzLmR1cmF0aW9uKSksIHN0eWxlOiB7ZmlsbDogJ3RyYW5zcGFyZW50Jywgc3Ryb2tlOiBhdHRycy5mZ1N0cm9rZUNvbG9yLCBzdHJva2VXaWR0aDogU1RST0tFX1dJRFRIfX0pLFxuXHRcdFx0XHRtKCd0ZXh0Jywge3g6IFJBRElVUywgeTogUkFESVVTLCBzdHlsZToge3RleHRBbmNob3I6ICdtaWRkbGUnLCBkb21pbmFudEJhc2VsaW5lOiAnbWlkZGxlJywgZm9udFNpemU6ICcwLjk1ZW0nLCBmaWxsOiBhdHRycy50ZXh0Q29sb3J9fSwgYXR0cnMudGV4dCksXG5cdFx0XHRcdG0oJ2NpcmNsZScsIHtjeDogUkFESVVTLCBjeTogUkFESVVTLCByOiBSQURJVVMtRl9TVFJPS0VfV0lEVEgvMiwgc3R5bGU6IHtmaWxsOiAnI0VFRScsIHN0cm9rZTogJyNDQ0MnLCBzdHJva2VXaWR0aDogRl9TVFJPS0VfV0lEVEgsIG9wYWNpdHk6IHRoaXMuaXNGaW5pc2hlZCA/IDEgOiAwfX0pLFxuXHRcdFx0XHRtKCd0ZXh0Jywge3g6IFJBRElVUywgeTogUkFESVVTLCBzdHlsZToge3RleHRBbmNob3I6ICdtaWRkbGUnLCBkb21pbmFudEJhc2VsaW5lOiAnbWlkZGxlJywgZm9udFNpemU6ICcxLjVlbScsIGZpbGw6ICcjMDAwJywgb3BhY2l0eTogdGhpcy5pc0ZpbmlzaGVkID8gMSA6IDB9fSwgbS50cnVzdCgnJiMxMDAwNCcpKVxuXHRcdFx0KVxuXHRcdClcblx0fVxuXG5cdC8vIEludGVybmFsbHkgdXNlZCBtZXRob2RzXG5cblx0cHJvdGVjdGVkIHN0YXJ0UHJlc3MoKSB7XG5cdFx0dGhpcy5pc1ByZXNzZWQgPSB0cnVlXG5cdFx0dGhpcy5wcmV2VCA9IERhdGUubm93KClcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge3RoaXMudXBkYXRlUHJlc3MoKX0pXG5cdH1cblxuXHRwcm90ZWN0ZWQgZW5kUHJlc3MoKSB7XG5cdFx0dGhpcy5pc1ByZXNzZWQgPSBmYWxzZVxuXHR9XG5cblx0cHJvdGVjdGVkIHVwZGF0ZVByZXNzKCkge1xuXHRcdGlmICghdGhpcy5pc1ByZXNzZWQpIHtcblx0XHRcdHRoaXMudXBkYXRlUmVsZWFzZSgpXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0Y29uc3QgdCA9IERhdGUubm93KClcblx0XHRjb25zdCBkdCA9IHQgLSB0aGlzLnByZXZUXG5cdFx0dGhpcy5wcmVzc1QgPSBNYXRoLm1pbih0aGlzLnByZXNzVCArIGR0LCB0aGlzLmR1cmF0aW9uKVxuXHRcdGRyYXdBcmModGhpcy5lbEFyYywgYWNjZWwodGhpcy5wcmVzc1QgLyB0aGlzLmR1cmF0aW9uKSlcblx0XHR0aGlzLnByZXZUID0gdFxuXHRcdGlmICh0aGlzLnByZXNzVCA+PSB0aGlzLmR1cmF0aW9uKSB7XG5cdFx0XHR0aGlzLmZpbmlzaCgpXG5cdFx0XHRyZXR1cm4gLy8gY2FuY2VsIHRoZSBhbmltYXRpb24gbG9vcCBieSBleGl0aW5nIGhlcmVcblx0XHR9XG5cdFx0Ly8gS2VlcCBhbmltYXRpb24gcnVubmluZ1xuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7dGhpcy51cGRhdGVQcmVzcygpfSlcblx0fVxuXG5cdHByb3RlY3RlZCB1cGRhdGVSZWxlYXNlKCkge1xuXHRcdGNvbnN0IHQgPSBEYXRlLm5vdygpXG5cdFx0Y29uc3QgZHQgPSB0IC0gdGhpcy5wcmV2VFxuXHRcdHRoaXMucHJlc3NUID0gTWF0aC5tYXgodGhpcy5wcmVzc1QgLSBkdCwgMClcblx0XHRkcmF3QXJjKHRoaXMuZWxBcmMsIGFjY2VsKHRoaXMucHJlc3NUIC8gdGhpcy5kdXJhdGlvbikpXG5cdFx0dGhpcy5wcmV2VCA9IHRcblx0XHRpZiAodGhpcy5wcmVzc1QgPD0gMCkge1xuXHRcdFx0cmV0dXJuIC8vIGNhbmNlbCB0aGUgYW5pbWF0aW9uIGxvb3AgYnkgZXhpdGluZyBoZXJlXG5cdFx0fVxuXHRcdC8vIEtlZXAgYW5pbWF0aW9uIHJ1bm5pbmdcblx0XHQvLyBVc2UgdXBkYXRQcmVzcyBpbiBjYXNlIGlzUHJlc3NlZCBzdGF0ZSBjaGFuZ2VzXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHt0aGlzLnVwZGF0ZVByZXNzKCl9KVxuXHR9XG5cblx0cHJvdGVjdGVkIGZpbmlzaCgpIHtcblx0XHRkcmF3QXJjKHRoaXMuZWxBcmMsIDApXG5cdFx0dGhpcy5lbC5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCdcblx0XHR0aGlzLmVsQmdDaXJjbGUuc3R5bGUuc3Ryb2tlID0gdGhpcy5mZ1N0cm9rZUNvbG9yXG5cdFx0dGhpcy5wcmVzc1QgPSAwXG5cdFx0dGhpcy5pc1ByZXNzZWQgPSBmYWxzZVxuXHRcdHRoaXMuaXNGaW5pc2hlZCA9IHRydWVcblx0XHRmYWRlSW4odGhpcy5lbEZnQ2lyY2xlKVxuXHRcdGZhZGVJbih0aGlzLmVsRmdUZXh0KVxuXHRcdHRoaXMuZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3ByZXNzZWQnKSlcblx0fVxuXG5cdHByb3RlY3RlZCByZXNldCgpIHtcblx0XHR0aGlzLmlzUHJlc3NlZCA9IGZhbHNlXG5cdFx0dGhpcy5wcmVzc1QgPSAwXG5cdFx0dGhpcy5lbEJnQ2lyY2xlLnN0eWxlLnN0cm9rZSA9IHRoaXMuYmdTdHJva2VDb2xvclxuXHRcdHRoaXMuZWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInXG5cdFx0ZHJhd0FyYyh0aGlzLmVsQXJjLCAwKVxuXHRcdHRoaXMuaXNGaW5pc2hlZCA9IGZhbHNlXG5cdFx0Ly8gSGlkZSB0aGUgJ2ZpbmlzaGVkJyBlbGVtZW50c1xuXHRcdHJlbW92ZUZhZGVJbih0aGlzLmVsRmdDaXJjbGUpXG5cdFx0cmVtb3ZlRmFkZUluKHRoaXMuZWxGZ1RleHQpXG5cdH1cbn1cblxuXG4vLyBTVkcgQXJjIGhlbHBlciBmdW5jdGlvbnMgKGJlY2F1c2UgYXJjcyBhcmUgb3RoZXJ3aXNlIGRpZmZpY3VsdCB3aXRoIFNWRyEpXG5cbmZ1bmN0aW9uIHBvbGFyVG9DYXJ0ZXNpYW4gKGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgZGVncmVlczogbnVtYmVyLCBvdXQ6IFZlYzIpIHtcblx0Y29uc3QgciA9IChkZWdyZWVzLTkwKSAqIE1hdGguUEkgLyAxODAuMFxuXHRvdXQueCA9IGNlbnRlclggKyAocmFkaXVzICogTWF0aC5jb3MocikpXG5cdG91dC55ID0gY2VudGVyWSArIChyYWRpdXMgKiBNYXRoLnNpbihyKSlcblx0cmV0dXJuIG91dFxufVxuXG4vLyBDcmVhdGUgYW4gU1ZHIGFyYyBkZWZpbml0aW9uIGNlbnRyZWQgYXQgeCx5IHdpdGggcmFkaXVzLFxuLy8gc3RhcnQgYW5kIGVuZCBhbmdsZXMgKGNsb2Nrd2lzZSwgaW4gZGVncmVlcylcbmNvbnN0IHN2Z0FyY1BhdGggPSAoZnVuY3Rpb24oKXtcblx0Y29uc3QgX3AwID0ge3g6IDAsIHk6IDB9XG5cdGNvbnN0IF9wMSA9IHt4OiAwLCB5OiAwfVxuXHRmdW5jdGlvbiBzdmdBcmNQYXRoICh4OiBudW1iZXIsIHk6IG51bWJlciwgcmFkaXVzOiBudW1iZXIsIHN0YXJ0QW5nbGU6IG51bWJlciwgZW5kQW5nbGU6IG51bWJlcikge1xuXHRcdHBvbGFyVG9DYXJ0ZXNpYW4oeCwgeSwgcmFkaXVzLCBlbmRBbmdsZSwgX3AwKVxuXHRcdHBvbGFyVG9DYXJ0ZXNpYW4oeCwgeSwgcmFkaXVzLCBzdGFydEFuZ2xlLCBfcDEpXG5cdFx0Y29uc3QgYXJjU3dlZXAgPSBlbmRBbmdsZSAtIHN0YXJ0QW5nbGUgPD0gMTgwID8gJzAnIDogJzEnXG5cdFx0cmV0dXJuICdNICcgKyBfcDAueCArICcgJyArIF9wMC55ICtcblx0XHRcdCdBICcgKyByYWRpdXMgKyAnICcgKyByYWRpdXMgKyAnIDAgJyArIGFyY1N3ZWVwICsgJyAwICcgKyBfcDEueCArICcgJyArIF9wMS55XG5cdH1cblx0cmV0dXJuIHN2Z0FyY1BhdGhcbn0oKSlcblxuLyoqXG4gKiBEcmF3ICUgb2YgYXJjXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICogQHBhcmFtIHtudW1iZXJ9IHBjdFxuICovXG5mdW5jdGlvbiBkcmF3QXJjIChlbDogU1ZHU1ZHRWxlbWVudCwgcGN0OiBudW1iZXIpIHtcblx0ZWwuc2V0QXR0cmlidXRlKCdkJyxcblx0XHRzdmdBcmNQYXRoKFxuXHRcdFx0UkFESVVTLCBSQURJVVMsIFJBRElVUyAtIFNUUk9LRV9XSURUSCAvIDIsIDAsIHBjdCAqIDM2MFxuXHRcdClcblx0KVxufVxuXG4vKiogTm9uLWxpbmVhciBhcmMgbW90aW9uICovXG5mdW5jdGlvbiBhY2NlbCAodDogbnVtYmVyKSB7XG5cdHJldHVybiBNYXRoLnBvdyh0LCAyLjI1KVxufVxuXG5mdW5jdGlvbiBmYWRlSW4gKGVsOiBhbnkpIHtcblx0ZWwuc3R5bGUub3BhY2l0eSA9ICcxJ1xuXHRlbC5jbGFzc0xpc3QuYWRkKCdsb25ncHJlc3Nlci1mYWRlLWluJylcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRmFkZUluIChlbDogYW55KSB7XG5cdGVsLnN0eWxlLm9wYWNpdHkgPSAnMCdcblx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnbG9uZ3ByZXNzZXItZmFkZS1pbicpXG59XG5cbi8vIE11c3QgZG8gc29tZSBmdW5reSBjYXN0aW5nIHRvIG1ha2UgYSBjb21wYXRpYmxlIHR5cGUgOihcbmV4cG9ydCBkZWZhdWx0IDxhbnk+TG9uZ1ByZXNzZXIgYXMgdHlwZW9mIE1pdGhyaWwuQ29tcG9uZW50XG4iLCJkZWNsYXJlIGNvbnN0IG06IE1pdGhyaWwuU3RhdGljXG5cbmltcG9ydCBhcHAgZnJvbSAnLi9hcHAnXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRtLm1vdW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKSBhcyBIVE1MRWxlbWVudCwgYXBwKVxufSlcbiJdfQ==
